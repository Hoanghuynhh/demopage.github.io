<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bản đồ trồng cây xanh</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.4.0/css/lightgallery.min.css">
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.4.0/lightgallery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.4.0/plugins/zoom/lg-zoom.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.4.0/plugins/fullscreen/lg-fullscreen.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Yeseva+One&display=swap" rel="stylesheet">
    <style>
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
        }
        #map {
            flex-grow: 1;
            width: 100%;
        }
        
        /* CSS cho header */
        header {
            position: relative;
            color: white;
            text-align: center;
            padding: 0.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: hidden;
        }
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('BG.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0.7;
            z-index: -2;
        }
        header::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #2ea05d;
            opacity: 0.3;
            z-index: -1;
        }
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }
        .logo-container img {
            height: 40px;
            margin: 0 5px;
        }
        header h1 {
            margin: 0;
            font-size: 1.5em;
            position: relative;
            z-index: 1;
            font-family: 'Yeseva One', cursive;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            letter-spacing: 0.1em;
        }
        
        /* CSS cho footer */
        footer {
            position: relative;
            color: white;
            text-align: center;
            padding: 0.5rem;
            font-size: 0.9em;
            overflow: hidden;
        }
        footer::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('BG.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0.7;
            z-index: -2;
        }
        footer::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, rgba(44,166,92,1) 57%, rgba(21,116,44,1) 100%);
            opacity: 0.3;
            z-index: -1;
        }
        footer p {
            margin: 0;
            position: relative;
            z-index: 1;
        }
        
        /* Style cho popup */
        .custom-popup {
            max-width: 300px;
        }
        .custom-popup .swiper {
            width: 100%;
            height: 200px;
            margin-bottom: 10px;
        }
        .custom-popup .swiper-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            cursor: pointer;
        }
        .custom-popup p {
            margin: 0;
            padding: 5px 0;
        }
        
        /* Style cho Lightbox */
        .lg-backdrop {
            background-color: rgba(0, 0, 0, 0.85);
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="logodoan.png" alt="Logo Đoàn">
            <img src="logohoi.png" alt="Logo Hội">
        </div>
        <h1>Bản đồ phủ xanh</h1>
    </header>

    <div id="map"></div>

    <footer>
        <p>&copy; 2023 Bản đồ trồng cây xanh</p>
    </footer>

    <script>
        // Tọa độ của Củ Chi, TP. Hồ Chí Minh
        var cuChiCoords = [10.973042, 106.494047];
        
        var map = L.map('map').setView(cuChiCoords, 13);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        var customIcon = L.icon({
            iconUrl: 'marker.png',
            iconSize: [32, 32],
            iconAnchor: [16, 32],
            popupAnchor: [0, -32]
        });

        // Tạo nội dung HTML cho popup với slideshow
        var popupContent = `
            <div class="custom-popup">
                <div class="swiper" id="swiper-popup">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <img src="CNX ANT 1.jpg" alt="Củ Chi 1" data-src="cu-chi-image1.jpg">
                        </div>
                        <div class="swiper-slide">
                            <img src="CNX ANT.jpg" alt="Củ Chi 2" data-src="cu-chi-image2.jpg">
                        </div>
                        <div class="swiper-slide">
                            <img src="CNX ANT 2.jpg" alt="Củ Chi 3" data-src="cu-chi-image3.jpg">
                        </div>
                        <div class="swiper-slide">
                            <img src="CNX ANT 3.jpg" alt="Củ Chi 4" data-src="cu-chi-image4.jpg">
                        </div>
                    </div>
                    <div class="swiper-pagination"></div>
                    <div class="swiper-button-prev"></div>
                    <div class="swiper-button-next"></div>
                </div>
                <p><strong>Tuyến đường Võ Thị Mè, ấp Gót Chàng, An Nhơn Tây, Huyện Củ Chi, TP. Hồ Chí Minhh</strong></p>
                <p>Sáng ngày 26/5/2024, với tinh thần hăng hái của tuổi trẻ, các bạn đoàn viên, thanh niên xã An Nhơn Tây đã ra quân trồng và dặm vá 50 cây chuông vàng trên tuyến đường Võ Thị Mè, ấp Gót Chàng.</p>
            </div>
        `;

        // Thêm marker với popup chứa slideshow
        var popup = L.popup({
            maxWidth: 300
        }).setContent(popupContent);

        L.marker(cuChiCoords, {icon: customIcon}).addTo(map)
            .bindPopup(popup)
            .on('popupopen', function() {
                var swiper = new Swiper('#swiper-popup', {
                    loop: true,
                    pagination: {
                        el: '.swiper-pagination',
                    },
                    navigation: {
                        nextEl: '.swiper-button-next',
                        prevEl: '.swiper-button-prev',
                    },
                });

                // Khởi tạo Lightbox
                var lightbox = lightGallery(document.getElementById('swiper-popup'), {
                    dynamic: true,
                    dynamicEl: [
                        { src: 'CNX ANT 1.jpg', thumb: 'cu-chi-image1.jpg' },
                        { src: 'CNX ANT.jpg', thumb: 'cu-chi-image2.jpg' },
                        { src: 'CNX ANT 2.jpg', thumb: 'cu-chi-image3.jpg' },
                        { src: 'CNX ANT 3.jpg', thumb: 'cu-chi-image4.jpg' }
                    ],
                    plugins: [lgZoom, lgFullscreen],
                    mobileSettings: {
                        controls: false,
                        showCloseIcon: true,
                        download: false,
                        rotate: false
                    }
                });

                // Mở Lightbox khi click vào ảnh
                swiper.slides.forEach(function(slide, index) {
                    slide.querySelector('img').addEventListener('click', function() {
                        lightbox.openGallery(index);
                    });
                });
            });
    </script>
</body>
</html>
